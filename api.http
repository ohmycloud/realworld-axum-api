### test health_check
GET http://localhost:3000/health

### register a new user
POST http://localhost:3000/api/users
Content-Type: application/json

{
    "user": {
        "username": "rakudo",
        "email": "rakudo@star.org",
        "password": "password"
    }
}

### login a user

# @name login
POST http://localhost:3000/api/users/login
Content-Type: application/json

{
    "user": {
        "email": "rakudo@star.org",
        "password": "password"
    }
}

@access_token = {{login.response.body.access_token}}
@refresh_token = {{login.response.body.refresh_token}}

### get current user

GET http://localhost:3000/api/user
Authorization: Token {{access_token}}

### test refresh token

# @name refresh_token
POST http://localhost:3000/api/auth/refresh
Content-Type: application/json

{
    "refresh_token": "281b9601-0e52-45cb-8276-5cc6113bee90"
}

@access_token = {{refresh_token.response.body.access_token}}
@refresh_token = {{refresh_token.response.body.refresh_token}}

### test forgot password
POST http://localhost:3000/api/auth/forgot-password
Content-Type: application/json

{
    "email": "rakudo@star.org"
}

### test forgot password with non-existent email
POST http://localhost:3000/api/auth/forgot-password
Content-Type: application/json

{
    "email": "doesnotexist@example.com"
}

### test password reset
POST http://localhost:3000/api/auth/reset-password
Content-Type: application/json

{
    "token": "YOUR_RESET_TOKEN_HERE",
    "new_password": "newsecurepassword123"
}

### test login with new password
POST http://localhost:3000/api/users/login
Content-Type: application/json

{
    "user": {
        "email": "rakudo@star.org",
        "password": "newsecurepassword123"
    }
}

### test expired token
POST http://localhost:3000/api/auth/reset-password
Content-Type: application/json

{
    "token": "EXPIRED_TOKEN",
    "new_password": "shouldnotwork"
}
